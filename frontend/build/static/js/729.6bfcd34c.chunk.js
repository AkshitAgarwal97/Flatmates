"use strict";(self.webpackChunkflatmates_frontend=self.webpackChunkflatmates_frontend||[]).push([[729],{3560:(e,t,i)=>{i.d(t,{A:()=>l});var a=i(9662),r=i(579);const l=(0,a.A)((0,r.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},4729:(e,t,i)=>{i.d(t,{EditProfile:()=>F,UserProfile:()=>W});var a=i(5043),r=i(9456),l=i(3216),s=i(5475),n=i(9252),o=i(1637),c=i(5865),d=i(3336),x=i(6446),m=i(1906),h=i(8903),u=i(1045),p=i(2110),j=i(6494),A=i(3845),b=i(3560),g=i(9662),f=i(579);const y=(0,g.A)((0,f.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 4-8 5-8-5V6l8 5 8-5z"}),"Email"),v=(0,g.A)((0,f.jsx)("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02z"}),"Phone"),N=(0,g.A)((0,f.jsx)("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7m0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"}),"LocationOn");var M=i(5163);const W=()=>{var e,t;const i=(0,r.wA)(),g=(0,l.Zp)(),{user:W,loading:C,error:S,isAuthenticated:w}=(0,r.d4)(e=>e.auth);return(0,a.useEffect)(()=>{w?w&&!W&&i((0,M.YW)()):g("/login")},[i,W,w,g]),C?(0,f.jsx)(n.A,{maxWidth:"md",sx:{mt:4,display:"flex",justifyContent:"center"},children:(0,f.jsx)(o.A,{})}):S?(0,f.jsx)(n.A,{maxWidth:"md",sx:{mt:4},children:(0,f.jsxs)(c.A,{color:"error",children:["Error loading profile: ",S]})}):W?(0,f.jsx)(n.A,{maxWidth:"md",sx:{mt:4,mb:4},children:(0,f.jsxs)(d.A,{elevation:3,sx:{p:4},children:[(0,f.jsxs)(x.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[(0,f.jsx)(c.A,{variant:"h4",component:"h1",children:"My Profile"}),(0,f.jsx)(m.A,{component:s.N_,to:"/profile/edit",variant:"contained",startIcon:(0,f.jsx)(b.A,{}),children:"Edit Profile"})]}),(0,f.jsxs)(h.Ay,{container:!0,spacing:4,children:[(0,f.jsx)(h.Ay,{item:!0,xs:12,md:4,children:(0,f.jsxs)(x.A,{display:"flex",flexDirection:"column",alignItems:"center",children:[(0,f.jsxs)(u.A,{alt:"".concat(W.firstName," ").concat(W.lastName,"'s profile picture"),src:W.profilePicture,sx:{width:150,height:150,mb:2},children:[null===(e=W.firstName)||void 0===e?void 0:e[0],null===(t=W.lastName)||void 0===t?void 0:t[0]]}),(0,f.jsxs)(c.A,{variant:"h5",gutterBottom:!0,children:[W.firstName," ",W.lastName]}),(0,f.jsxs)(c.A,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["Member since ",new Date(W.createdAt).toLocaleDateString()]})]})}),(0,f.jsxs)(h.Ay,{item:!0,xs:12,md:8,children:[(0,f.jsx)(p.A,{sx:{mb:3},children:(0,f.jsxs)(j.A,{children:[(0,f.jsx)(c.A,{variant:"h6",gutterBottom:!0,children:"Contact Information"}),(0,f.jsxs)(x.A,{display:"flex",alignItems:"center",mb:1,children:[(0,f.jsx)(y,{sx:{mr:1,color:"text.secondary"}}),(0,f.jsx)(c.A,{children:W.email})]}),W.phone&&(0,f.jsxs)(x.A,{display:"flex",alignItems:"center",mb:1,children:[(0,f.jsx)(v,{sx:{mr:1,color:"text.secondary"}}),(0,f.jsx)(c.A,{children:W.phone})]}),W.location&&(0,f.jsxs)(x.A,{display:"flex",alignItems:"center",children:[(0,f.jsx)(N,{sx:{mr:1,color:"text.secondary"}}),(0,f.jsx)(c.A,{children:W.location})]})]})}),W.bio&&(0,f.jsx)(p.A,{sx:{mb:3},children:(0,f.jsxs)(j.A,{children:[(0,f.jsx)(c.A,{variant:"h6",gutterBottom:!0,children:"About Me"}),(0,f.jsx)(c.A,{variant:"body1",children:W.bio})]})}),(0,f.jsx)(p.A,{sx:{mb:3},children:(0,f.jsxs)(j.A,{children:[(0,f.jsx)(c.A,{variant:"h6",gutterBottom:!0,children:"Personal Details"}),(0,f.jsx)(h.Ay,{container:!0,spacing:2,children:Object.entries({Age:W.age?"".concat(W.age," years old"):null,Occupation:W.occupation,University:W.university,"Budget Range":W.budget?"$".concat(W.budget.min," - $").concat(W.budget.max):null}).map(e=>{let[t,i]=e;return i&&(0,f.jsxs)(h.Ay,{item:!0,xs:6,children:[(0,f.jsx)(c.A,{variant:"body2",color:"text.secondary",children:t}),(0,f.jsx)(c.A,{variant:"body1",children:i})]},t)})})]})}),W.preferences&&(0,f.jsx)(p.A,{children:(0,f.jsxs)(j.A,{children:[(0,f.jsx)(c.A,{variant:"h6",gutterBottom:!0,children:"Preferences"}),W.preferences.lifestyle&&(0,f.jsxs)(x.A,{mb:2,children:[(0,f.jsx)(c.A,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Lifestyle"}),(0,f.jsx)(x.A,{display:"flex",flexWrap:"wrap",gap:1,children:W.preferences.lifestyle.map((e,t)=>(0,f.jsx)(A.A,{label:e,size:"small"},t))})]}),W.preferences.interests&&(0,f.jsxs)(x.A,{children:[(0,f.jsx)(c.A,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Interests"}),(0,f.jsx)(x.A,{display:"flex",flexWrap:"wrap",gap:1,children:W.preferences.interests.map((e,t)=>(0,f.jsx)(A.A,{label:e,size:"small",color:"primary"},t))})]})]})})]})]})]})}):(0,f.jsx)(n.A,{maxWidth:"md",sx:{mt:4},children:(0,f.jsx)(c.A,{children:"No profile data available"})})};var C=i(2555),S=i(3516),w=i(899),I=i(4194),B=i(7392),D=i(7784),P=i(3193),k=i(9190),z=i(9285),L=i(9859),E=i(1449);const T=(0,g.A)([(0,f.jsx)("circle",{cx:"12",cy:"12",r:"3.2"},"0"),(0,f.jsx)("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5"},"1")],"PhotoCamera"),V=(0,g.A)((0,f.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"}),"Cancel"),Y=(0,g.A)((0,f.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"}),"Save"),O=w.Ik().shape({firstName:w.Yj().required("First name is required"),lastName:w.Yj().required("Last name is required"),email:w.Yj().email("Invalid email").required("Email is required"),phone:w.Yj().nullable(),location:w.Yj().nullable(),bio:w.Yj().max(500,"Bio must be less than 500 characters").nullable(),age:w.ai().transform(e=>isNaN(e)?void 0:e).min(18,"Must be at least 18").max(100,"Invalid age").nullable(),occupation:w.Yj().nullable(),university:w.Yj().nullable(),budgetMin:w.ai().transform(e=>isNaN(e)?void 0:e).min(0,"Budget must be positive").nullable(),budgetMax:w.ai().transform(e=>isNaN(e)?void 0:e).min(0,"Budget must be positive").test("max","Max budget must be greater than min budget",function(e){const{budgetMin:t}=this.parent;return!t||!e||e>t}).nullable()}),q=["Non-smoker","Smoker","Social drinker","Non-drinker","Pet-friendly","No pets","Early riser","Night owl","Quiet","Social","Clean","Organized"],U=["Sports","Music","Movies","Reading","Cooking","Travel","Gaming","Art","Photography","Fitness","Technology","Nature","Fashion","Food"],F=()=>{var e,t,i,s,p;const j=(0,r.wA)(),b=(0,l.Zp)(),{user:g,loading:y,error:v,isAuthenticated:N}=(0,r.d4)(e=>e.auth),[W,w]=(0,a.useState)([]),[F,R]=(0,a.useState)([]),[H,$]=(0,a.useState)(null);(0,a.useEffect)(()=>{N?N&&!g&&j((0,M.YW)()):b("/login")},[j,g,N,b]),(0,a.useEffect)(()=>{var e,t;g&&(w((null===(e=g.preferences)||void 0===e?void 0:e.lifestyle)||[]),R((null===(t=g.preferences)||void 0===t?void 0:t.interests)||[]))},[g]);const _=e=>{var t;const i=null===(t=e.target.files)||void 0===t?void 0:t[0];i&&i.type.startsWith("image/")?$(i):console.error("Invalid file type")},Z=e=>{w(e.target.value)},G=e=>{R(e.target.value)},Q=g||{},J={firstName:Q.firstName||"",lastName:Q.lastName||"",email:Q.email||"",phone:Q.phone||"",location:Q.location||"",bio:Q.bio||"",age:(null===(e=Q.age)||void 0===e?void 0:e.toString())||"",occupation:Q.occupation||"",university:Q.university||"",budgetMin:(null===(t=Q.budget)||void 0===t||null===(i=t.min)||void 0===i?void 0:i.toString())||"",budgetMax:(null===(s=Q.budget)||void 0===s||null===(p=s.max)||void 0===p?void 0:p.toString())||""};return y?(0,f.jsx)(n.A,{maxWidth:"md",sx:{mt:4,display:"flex",justifyContent:"center"},children:(0,f.jsx)(o.A,{})}):(0,f.jsx)(n.A,{maxWidth:"md",sx:{mt:4,mb:4},children:(0,f.jsxs)(d.A,{elevation:3,sx:{p:4},children:[(0,f.jsx)(c.A,{variant:"h4",component:"h1",gutterBottom:!0,children:"Edit Profile"}),v&&(0,f.jsx)(I.A,{severity:"error",sx:{mb:3},children:v}),(0,f.jsx)(S.l1,{initialValues:J,validationSchema:O,onSubmit:async(e,t)=>{let{setSubmitting:i}=t;try{var a;const t={firstName:e.firstName,lastName:e.lastName,email:e.email,phone:e.phone,location:e.location,bio:e.bio,age:e.age,occupation:e.occupation,university:e.university,preferences:{location:e.location||"",budget:(null===(a=e.budgetMax)||void 0===a?void 0:a.toString())||"",moveInDate:(new Date).toISOString(),duration:"12",gender:"any",lifestyle:W,interests:F}};e.budgetMin&&e.budgetMax&&(t.budget={min:Number(e.budgetMin),max:Number(e.budgetMax)});const i=(0,C.A)((0,C.A)({},t),{},{avatar:H||void 0});await j((0,M.r7)(i)).unwrap(),b("/profile")}catch(v){console.error("Profile update failed:",v instanceof Error?v.message:"Unknown error")}finally{i(!1)}},enableReinitialize:!0,children:e=>{var t,i;let{errors:a,touched:r,values:l,handleChange:s,handleBlur:n,isSubmitting:o}=e;return(0,f.jsx)(S.lV,{children:(0,f.jsxs)(h.Ay,{container:!0,spacing:3,children:[(0,f.jsx)(h.Ay,{item:!0,xs:12,display:"flex",justifyContent:"center",mb:3,children:(0,f.jsxs)(x.A,{position:"relative",children:[(0,f.jsxs)(u.A,{src:H?URL.createObjectURL(H):Q.profilePicture,sx:{width:120,height:120},children:[null===(t=Q.firstName)||void 0===t?void 0:t[0],null===(i=Q.lastName)||void 0===i?void 0:i[0]]}),(0,f.jsxs)(B.A,{component:"label",sx:{position:"absolute",bottom:0,right:0,backgroundColor:"primary.main",color:"white","&:hover":{backgroundColor:"primary.dark"}},children:[(0,f.jsx)(T,{}),(0,f.jsx)("input",{type:"file",hidden:!0,accept:"image/*",onChange:_})]})]})}),(0,f.jsx)(h.Ay,{item:!0,xs:12,sm:6,children:(0,f.jsx)(S.D0,{as:D.A,name:"firstName",label:"First Name",fullWidth:!0,error:r.firstName&&!!a.firstName,helperText:r.firstName&&a.firstName})}),(0,f.jsx)(h.Ay,{item:!0,xs:12,sm:6,children:(0,f.jsx)(S.D0,{as:D.A,name:"lastName",label:"Last Name",fullWidth:!0,error:r.lastName&&!!a.lastName,helperText:r.lastName&&a.lastName})}),(0,f.jsx)(h.Ay,{item:!0,xs:12,children:(0,f.jsx)(S.D0,{as:D.A,name:"email",label:"Email",type:"email",fullWidth:!0,error:r.email&&!!a.email,helperText:r.email&&a.email})}),(0,f.jsx)(h.Ay,{item:!0,xs:12,sm:6,children:(0,f.jsx)(S.D0,{as:D.A,name:"phone",label:"Phone Number",fullWidth:!0,error:r.phone&&!!a.phone,helperText:r.phone&&a.phone})}),(0,f.jsx)(h.Ay,{item:!0,xs:12,sm:6,children:(0,f.jsx)(S.D0,{as:D.A,name:"location",label:"Location",fullWidth:!0,error:r.location&&!!a.location,helperText:r.location&&a.location})}),(0,f.jsx)(h.Ay,{item:!0,xs:12,children:(0,f.jsx)(S.D0,{as:D.A,name:"bio",label:"Bio",multiline:!0,rows:4,fullWidth:!0,error:r.bio&&!!a.bio,helperText:r.bio&&a.bio})}),(0,f.jsx)(h.Ay,{item:!0,xs:12,sm:4,children:(0,f.jsx)(S.D0,{as:D.A,name:"age",label:"Age",type:"number",fullWidth:!0,error:r.age&&!!a.age,helperText:r.age&&a.age})}),(0,f.jsx)(h.Ay,{item:!0,xs:12,sm:4,children:(0,f.jsx)(S.D0,{as:D.A,name:"occupation",label:"Occupation",fullWidth:!0,error:r.occupation&&!!a.occupation,helperText:r.occupation&&a.occupation})}),(0,f.jsx)(h.Ay,{item:!0,xs:12,sm:4,children:(0,f.jsx)(S.D0,{as:D.A,name:"university",label:"University",fullWidth:!0,error:r.university&&!!a.university,helperText:r.university&&a.university})}),(0,f.jsx)(h.Ay,{item:!0,xs:12,sm:6,children:(0,f.jsx)(S.D0,{as:D.A,name:"budgetMin",label:"Budget Min ($)",type:"number",fullWidth:!0,error:r.budgetMin&&!!a.budgetMin,helperText:r.budgetMin&&a.budgetMin})}),(0,f.jsx)(h.Ay,{item:!0,xs:12,sm:6,children:(0,f.jsx)(S.D0,{as:D.A,name:"budgetMax",label:"Budget Max ($)",type:"number",fullWidth:!0,error:r.budgetMax&&!!a.budgetMax,helperText:r.budgetMax&&a.budgetMax})}),(0,f.jsx)(h.Ay,{item:!0,xs:12,children:(0,f.jsxs)(P.A,{fullWidth:!0,children:[(0,f.jsx)(k.A,{children:"Lifestyle Preferences"}),(0,f.jsx)(z.A,{multiple:!0,value:W,onChange:Z,input:(0,f.jsx)(L.A,{label:"Lifestyle Preferences"}),renderValue:e=>(0,f.jsx)(x.A,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map(e=>(0,f.jsx)(A.A,{label:e,size:"small"},e))}),children:q.map(e=>(0,f.jsx)(E.A,{value:e,children:e},e))})]})}),(0,f.jsx)(h.Ay,{item:!0,xs:12,children:(0,f.jsxs)(P.A,{fullWidth:!0,children:[(0,f.jsx)(k.A,{children:"Interests"}),(0,f.jsx)(z.A,{multiple:!0,value:F,onChange:G,input:(0,f.jsx)(L.A,{label:"Interests"}),renderValue:e=>(0,f.jsx)(x.A,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map(e=>(0,f.jsx)(A.A,{label:e,size:"small",color:"primary"},e))}),children:U.map(e=>(0,f.jsx)(E.A,{value:e,children:e},e))})]})}),(0,f.jsx)(h.Ay,{item:!0,xs:12,children:(0,f.jsxs)(x.A,{display:"flex",gap:2,justifyContent:"flex-end",children:[(0,f.jsx)(m.A,{variant:"outlined",startIcon:(0,f.jsx)(V,{}),onClick:()=>b("/profile"),children:"Cancel"}),(0,f.jsx)(m.A,{type:"submit",variant:"contained",startIcon:(0,f.jsx)(Y,{}),disabled:o,children:o?"Saving...":"Save Changes"})]})})]})})}})]})})}}}]);
//# sourceMappingURL=729.6bfcd34c.chunk.js.map