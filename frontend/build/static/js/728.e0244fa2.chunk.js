"use strict";(self.webpackChunkflatmates_frontend=self.webpackChunkflatmates_frontend||[]).push([[728],{6728:(e,s,r)=>{r.r(s),r.d(s,{default:()=>A});var a=r(5043),o=r(3216),i=r(9456),n=r(3125),t=r(3516),d=r(899),l=r(8202),c=r(6446),m=r(1906),u=r(7784),h=r(9252),x=r(3336),p=r(5865),w=r(1637),f=r(4194),b=r(9792),v=r(1045),j=r(579);const A=()=>{const e=(0,l.jL)(),s=(0,o.Zp)(),{loading:r,error:A,step:g,email:P,message:y}=(0,i.d4)(e=>e.passwordReset),[C,S]=(0,a.useState)(""),[W,T]=(0,a.useState)("");(0,a.useEffect)(()=>{e((0,n.$V)())},[e]);const k=(0,t.Wx)({initialValues:{email:""},validationSchema:d.Ik({email:d.Yj().email("Invalid email address").required("Email is required")}),onSubmit:s=>{S(s.email),e((0,n.AJ)(s.email))}}),q=(0,t.Wx)({initialValues:{otp:""},validationSchema:d.Ik({otp:d.Yj().length(6,"OTP must be 6 digits").required("OTP is required")}),onSubmit:s=>{T(s.otp),e((0,n.vJ)({email:P||C,otp:s.otp}))}}),O=(0,t.Wx)({initialValues:{password:"",confirmPassword:""},validationSchema:d.Ik({password:d.Yj().min(6,"Password must be at least 6 characters").required("Password is required"),confirmPassword:d.Yj().oneOf([d.KR("password")],"Passwords must match").required("Confirm password is required")}),onSubmit:s=>{e((0,n.xw)({email:P||C,otp:W,password:s.password}))}}),V=()=>{e((0,n.$V)()),s("/login")};return(0,j.jsx)(h.A,{component:"main",maxWidth:"sm",children:(0,j.jsxs)(c.A,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,j.jsx)(v.A,{sx:{m:1,bgcolor:"secondary.main"},children:(0,j.jsx)(b.A,{})}),(0,j.jsx)(p.A,{component:"h1",variant:"h5",children:"Reset Password"}),(0,j.jsxs)(x.A,{elevation:3,sx:{mt:3,p:4,width:"100%"},children:[A&&(0,j.jsx)(f.A,{severity:"error",sx:{mb:2},children:A}),y&&"success"!==g&&(0,j.jsx)(f.A,{severity:"success",sx:{mb:2},children:y}),"email"===g&&(0,j.jsxs)(c.A,{component:"form",onSubmit:k.handleSubmit,children:[(0,j.jsx)(p.A,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Enter your email address and we'll send you an OTP to reset your password."}),(0,j.jsx)(u.A,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:k.values.email,onChange:k.handleChange,error:k.touched.email&&Boolean(k.errors.email),helperText:k.touched.email&&k.errors.email}),(0,j.jsx)(m.A,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:r,children:r?(0,j.jsx)(w.A,{size:24}):"Send OTP"}),(0,j.jsx)(m.A,{fullWidth:!0,variant:"text",onClick:V,children:"Back to Login"})]}),"otp"===g&&(0,j.jsxs)(c.A,{component:"form",onSubmit:q.handleSubmit,children:[(0,j.jsxs)(p.A,{variant:"body2",color:"text.secondary",sx:{mb:2},children:["Enter the 6-digit OTP sent to ",P||C]}),(0,j.jsx)(u.A,{margin:"normal",required:!0,fullWidth:!0,id:"otp",label:"OTP Code",name:"otp",autoFocus:!0,inputProps:{maxLength:6},value:q.values.otp,onChange:q.handleChange,error:q.touched.otp&&Boolean(q.errors.otp),helperText:q.touched.otp&&q.errors.otp}),(0,j.jsx)(m.A,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:r,children:r?(0,j.jsx)(w.A,{size:24}):"Verify OTP"}),(0,j.jsx)(m.A,{fullWidth:!0,variant:"text",onClick:()=>e((0,n.$V)()),children:"Resend OTP"})]}),"password"===g&&(0,j.jsxs)(c.A,{component:"form",onSubmit:O.handleSubmit,children:[(0,j.jsx)(p.A,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Enter your new password"}),(0,j.jsx)(u.A,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"New Password",type:"password",id:"password",autoFocus:!0,value:O.values.password,onChange:O.handleChange,error:O.touched.password&&Boolean(O.errors.password),helperText:O.touched.password&&O.errors.password}),(0,j.jsx)(u.A,{margin:"normal",required:!0,fullWidth:!0,name:"confirmPassword",label:"Confirm Password",type:"password",id:"confirmPassword",value:O.values.confirmPassword,onChange:O.handleChange,error:O.touched.confirmPassword&&Boolean(O.errors.confirmPassword),helperText:O.touched.confirmPassword&&O.errors.confirmPassword}),(0,j.jsx)(m.A,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:r,children:r?(0,j.jsx)(w.A,{size:24}):"Reset Password"})]}),"success"===g&&(0,j.jsxs)(c.A,{textAlign:"center",children:[(0,j.jsx)(f.A,{severity:"success",sx:{mb:3},children:y||"Password reset successfully!"}),(0,j.jsx)(p.A,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"You can now login with your new password."}),(0,j.jsx)(m.A,{fullWidth:!0,variant:"contained",onClick:V,children:"Go to Login"})]})]})]})})}},9792:(e,s,r)=>{var a=r(4994);s.A=void 0;var o=a(r(39)),i=r(579);s.A=(0,o.default)((0,i.jsx)("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l4 4 4-4H6c0-3.86 3.14-7 7-7s7 3.14 7 7-3.14 7-7 7c-1.9 0-3.62-.76-4.88-1.99L6.7 18.42C8.32 20.01 10.55 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m2 8v-1c0-1.1-.9-2-2-2s-2 .9-2 2v1c-.55 0-1 .45-1 1v3c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-3c0-.55-.45-1-1-1m-1 0h-2v-1c0-.55.45-1 1-1s1 .45 1 1z"}),"LockReset")}}]);
//# sourceMappingURL=728.e0244fa2.chunk.js.map